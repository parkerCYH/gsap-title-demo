<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quote Animation</title>
    <link rel="stylesheet" href="https://use.typekit.net/pxc5lqp.css" />
    <style>
      html:not(.disable-motion) .in-view .fx-letter {
        transform: translate3d(0, 0, 0) scaleY(1) rotateX(0) rotate(0);
        opacity: 1;
      }

      body {
        background: #000000;
        opacity: 1;
      }

      main {
        background: transparent url("g-pic.png") 0 0 no-repeat;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        opacity: 1;
      }

      .cases-quote-text .start-quote {
        left: -25px;
        position: absolute;
      }
      .cases-quote-text {
        position: relative;
        font-family: "Poppins";
        font-size: 48px;
        max-width: 720px;
        color: white;
        white-space: normal;
      }

      .fx-word {
        display: inline-block;
      }

      .fx-letter {
        display: inline-block;
        transform-origin: 0 100%;
        transform-style: preserve-3d;
        opacity: 1;
      }

      .start-quote,
      .end-quote {
        line-height: 80px;
      }
    </style>
  </head>
  <body>
    <main>
      <p class="cases-quote-text fx-parent" id="quote"></p>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
      const target = document.getElementById("quote");
      const text = "Team Taiwan! Team Taiwan! Taiwan is a great country!";
      let letterCount = 1;

      const startQuote = document.createElement("span");
      startQuote.classList.add(
        "fx-letter",
        `fx-letter--${letterCount++}`,
        "start-quote"
      );
      startQuote.textContent = "“";
      target.appendChild(startQuote);

      text.split(" ").forEach((word) => {
        const wordSpan = document.createElement("span");
        wordSpan.classList.add("fx-word");

        [...word].forEach((char) => {
          const letterSpan = document.createElement("span");
          letterSpan.classList.add("fx-letter", `fx-letter--${letterCount}`);
          letterSpan.textContent = char;
          wordSpan.appendChild(letterSpan);
          letterCount++;
        });

        target.appendChild(wordSpan);
        target.appendChild(document.createTextNode(" "));
      });

      const endQuote = document.createElement("span");
      endQuote.classList.add(
        "fx-letter",
        `fx-letter--${letterCount}`,
        "end-quote"
      );
      endQuote.textContent = "”";
      target.appendChild(endQuote);

      // GSAP 動畫
      gsap.set(".fx-letter", {
        transform:
          "translate3d(80px, 50px, -300px) scaleY(.01) rotateX(-90deg) rotate(-35deg)",
      });

      // 滾動進場觸發動畫
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            gsap.to(".fx-letter", {
              transform: "translateZ(0) scaleY(1) rotateX(0) rotate(0)",
              stagger: 0.015,
              duration: 0.3,
              ease: "cubic-bezier(0.245, 0.495, 0, 0.99)",
            });
            observer.unobserve(entry.target);
          }
        });
      });

      observer.observe(target);
    </script>
  </body>
</html>
